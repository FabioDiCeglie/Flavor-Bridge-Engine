#:schema node_modules/wrangler/config-schema.json
name = "flavor-bridge-engine"
main = "src/entry.py"
compatibility_date = "2024-12-01"
compatibility_flags = ["python_workers"]

# ============================================
# üß† Workers AI Binding
# ============================================
[ai]
binding = "AI"
remote = true

# ============================================
# üóÑÔ∏è Vectorize Binding
# ============================================
[[vectorize]]
binding = "VECTORIZE"
index_name = "flavor-bridge-index"
remote = true

# ============================================
# üö¶ Rate Limiting (KV)
# ============================================
[[kv_namespaces]]
binding = "RATE_LIMIT"
id = "92f68f46211c4dab8b3328f84fbf4dbc"

# ============================================
# üìä Observability
# ============================================
[observability.logs]
enabled = false
invocation_logs = true

# ============================================
# üöß STAGING Environment
# Deploy: npx wrangler deploy --env staging
# URL: flavor-bridge-engine-staging.*.workers.dev
# ============================================
[env.staging]
name = "flavor-bridge-engine-staging"

[env.staging.ai]
binding = "AI"

[[env.staging.vectorize]]
binding = "VECTORIZE"
index_name = "flavor-bridge-index"

[[env.staging.kv_namespaces]]
binding = "RATE_LIMIT"
id = "92f68f46211c4dab8b3328f84fbf4dbc"

[env.staging.observability.logs]
enabled = false
invocation_logs = true

# ============================================
# üöÄ PRODUCTION Environment
# Deploy: npx wrangler deploy --env production
# URL: flavor-bridge-engine.*.workers.dev
# ============================================
[env.production]
name = "flavor-bridge-engine"

[env.production.ai]
binding = "AI"

[[env.production.vectorize]]
binding = "VECTORIZE"
index_name = "flavor-bridge-index"

[[env.production.kv_namespaces]]
binding = "RATE_LIMIT"
id = "92f68f46211c4dab8b3328f84fbf4dbc"

[env.production.observability.logs]
enabled = false
invocation_logs = true
